---
layout: "metalcloud"
page_title: "Metalcloud: shared_drive"
description: |-
  Controls a Metalcloud Shared Drive.
---


# shared_drive

This structure represents a Metalcloud SharedDrive which is an iSCSI LUN that can be mounted on different InstanceArrays at the same time. This is typically used by VMWare or Kubernetes. It needs to be part of an Infrastructure.  Use the [infrastructure_reference](../d/infrastructure_reference.md) Data Source to determine the `infrastructure_id`.

## Example usage

```hcl
data "metalcloud_infrastructure" "infra" {
   
    infrastructure_label = "test-infra"
    datacenter_name = "dc-1" 
}

resource "metalcloud_shared_drive" "datastore" {

    infrastructure_id = data.metalcloud_infrastructure.infra.infrastructure_id
  
    shared_drive_label = "test-da-1"
    shared_drive_size_mbytes = 40966
    shared_drive_storage_type = "iscsi_hdd"

    shared_drive_attached_instance_arrays = [metalcloud_instance_array.cluster.instance_array_id]

```
## Argument Reference

* `shared_drive_label` (Required) *  **SharedDrive** name. Use only alphanumeric and dashes '-'. Cannot start with a number, cannot include underscore (_). Try to keep this under 30 chars.
* `shared_drive_storage_type` (Required) Possible values: iscsi_ssd, iscsi_hdd. Once set this value cannot be changed.
* `shared_drive_size_mbytes` (Optional, default: 40960) The capacity of each Drive in MBytes.
* `shared_drive_attached_instance_arrays` (Required, default: nil) An array of instance array labels to which this shared drive is to be attached to
* `shared_drive_io_limit_policy` (Optional, default: none) Set I/O limit (tiering) on the LUN. The accepted value is a string that needs to match the tier names which are environment dependent. 

## Expanding the shared drive

It is possible to expand the block device (increase the LUN size) of a SharedDrive by changing the `shared_drive_size_mbytes` property. The filesystem will also need to be expanded from within the operating system on which this drive is mounted.

# Outputs

The shared drive will output the following properties:

* `shared_drive_targets_json`  Is an JSON encoded as a string containing the following properties. In the future this property will be replaced by separate properties on the shared drive object.
[
   {
      "nVLANID":302,
      "strPort":"spa_ocp_0_eth0",
      "nPortalID":null,
      "nPrefixSize":64,
      "strPortalID":"if_42",
      "strIPAddress":"fdb6:959b:4444:0:0:0:0:1",
      "strTargetIQN":"iqn.1992-04.com.emc:cx.de406213718368.a0"
   },
   {
      "nVLANID":302,
      "strPort":"spa_iom_0_eth2",
      "nPortalID":null,
      "nPrefixSize":64,
      "strPortalID":"if_43",
      "strIPAddress":"fdb6:959b:4444:0:0:0:0:2",
      "strTargetIQN":"iqn.1992-04.com.emc:cx.de406213718368.a6"
   },
   {
      "nVLANID":302,
      "strPort":"spb_ocp_0_eth0",
      "nPortalID":null,
      "nPrefixSize":64,
      "strPortalID":"if_44",
      "strIPAddress":"fdb6:959b:4444:1:0:0:0:1",
      "strTargetIQN":"iqn.1992-04.com.emc:cx.de406213718368.b0"
   },
   {
      "nVLANID":302,
      "strPort":"spb_iom_0_eth2",
      "nPortalID":null,
      "nPrefixSize":64,
      "strPortalID":"if_45",
      "strIPAddress":"fdb6:959b:4444:1:0:0:0:2",
      "strTargetIQN":"iqn.1992-04.com.emc:cx.de406213718368.b6"
   }
]
* `shared_drive_wwn`  It is an unique identifier of the drive generated by the underlying storage system such as "60:06:01:60:26:C3:55:00:10:C3:E9:61:21:4A:0B:49"

